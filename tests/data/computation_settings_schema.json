{"$schema": "http://oasislmf.org/computation_settings/draft/schema#", "type": "object", "title": "Computation settings.", "description": "Specifies the computation settings and outputs for an analysis.", "additionalProperties": false, "properties": {"oasis_files_dir": {"type": "string", "description": "Path to the directory in which to generate the Oasis files"}, "exposure_pre_analysis_module": {"type": "string", "description": "Exposure Pre-Analysis lookup module path"}, "post_analysis_module": {"type": "string", "description": "Post-Analysis module path"}, "pre_loss_module": {"type": "string", "description": "pre-loss hook module path"}, "post_file_gen_module": {"type": "string", "description": "post-file gen hook module path"}, "check_oed": {"type": "boolean", "description": "if True check input oed files"}, "analysis_settings_json": {"type": "string", "description": "Analysis settings JSON file path"}, "model_storage_json": {"type": "string", "description": "Model data storage settings JSON file path"}, "model_settings_json": {"type": "string", "description": "Model settings JSON file path"}, "user_data_dir": {"type": "string", "description": "Directory containing additional model data files which varies between analysis runs"}, "model_data_dir": {"type": "string", "description": "Model data directory path"}, "copy_model_data": {"type": "boolean", "description": "Copy model data instead of creating symbolic links to it."}, "model_run_dir": {"type": "string", "description": "Model run directory path"}, "model_package_dir": {"type": "string", "description": "Path containing model specific package"}, "ktools_legacy_stream": {"type": "boolean", "description": "Run Ground up losses using the older stream type (Compatibility option)"}, "fmpy": {"type": "boolean", "description": "use fmcalc python version instead of c++ version"}, "ktools_alloc_rule_il": {"type": "number", "description": "Set the fmcalc allocation rule used in direct insured loss"}, "ktools_alloc_rule_ri": {"type": "number", "description": "Set the fmcalc allocation rule used in reinsurance"}, "summarypy": {"type": "boolean", "description": "use summarycalc python version instead of c++ version"}, "check_missing_inputs": {"type": "boolean", "description": "Fail an analysis run if IL/RI is requested without the required generated files."}, "verbose": {"type": "boolean"}, "ktools_num_processes": {"type": "number", "description": "Number of ktools calculation processes to use"}, "ktools_event_shuffle": {"type": "number", "description": "Set rule for event shuffling between eve partions, 0 - No shuffle, 1 - round robin (output elts sorted), 2 - Fisher-Yates shuffle, 3 - std::shuffle (previous default in oasislmf<1.14.0) "}, "ktools_alloc_rule_gul": {"type": "number", "description": "Set the allocation used in gulcalc"}, "ktools_num_gul_per_lb": {"type": "number", "description": "Number of gul per load balancer (0 means no load balancer)"}, "ktools_num_fm_per_lb": {"type": "number", "description": "Number of fm per load balancer (0 means no load balancer)"}, "ktools_disable_guard": {"type": "boolean", "description": "Disables error handling in the ktools run script (abort on non-zero exitcode or output on stderr)"}, "ktools_fifo_relative": {"type": "boolean", "description": "Create ktools fifo queues under the ./fifo dir"}, "modelpy": {"type": "boolean", "description": "use getmodel python version instead of c++ version"}, "gulpy": {"type": "boolean", "description": "use gulcalc python version instead of c++ version"}, "gulpy_random_generator": {"type": "number", "description": "set the random number generator in gulpy (0: Mersenne-Twister, 1: Latin Hypercube. Default: 1)."}, "gulmc": {"type": "boolean", "description": "use full Monte Carlo gulcalc python version"}, "gulmc_random_generator": {"type": "number", "description": "set the random number generator in gulmc (0: Mersenne-Twister, 1: Latin Hypercube. Default: 1)."}, "gulmc_effective_damageability": {"type": "boolean", "description": "use the effective damageability to draw loss samples instead of the full Monte Carlo method. Default: False"}, "gulmc_vuln_cache_size": {"type": "number", "description": "Size in MB of the cache for the vulnerability calculations. Default: 200"}, "fmpy_low_memory": {"type": "boolean", "description": "use memory map instead of RAM to store loss array (may decrease performance but reduce RAM usage drastically)"}, "fmpy_sort_output": {"type": "boolean", "description": "order fmpy output by item_id"}, "model_custom_gulcalc": {"type": "string", "description": "Custom gulcalc binary name to call in the model losses step"}, "model_py_server": {"type": "boolean", "description": "running the data server for modelpy"}, "peril_filter": {"type": "array", "description": "Peril specific run"}, "model_custom_gulcalc_log_start": {"type": "string", "description": "Log message produced when custom gulcalc binary process starts"}, "model_custom_gulcalc_log_finish": {"type": "string", "description": "Log message produced when custom gulcalc binary process ends"}, "base_df_engine": {"type": "string", "description": "The engine to use when loading dataframes"}, "model_df_engine": {"type": "string", "description": "The engine to use when loading model data dataframes (default: --base-df-engine if not set)"}, "exposure_df_engine": {"type": "string", "description": "The engine to use when loading exposure data dataframes (default: --base-df-engine if not set)"}, "dynamic_footprint": {"type": "boolean", "description": "Dynamic Footprint"}, "post_file_gen_class_name": {"type": "string", "description": "Name of the class to use for the pre loss calculation"}, "post_file_gen_setting_json": {"type": "string", "description": "post file generation config JSON file path"}, "oed_schema_info": {"type": "string", "description": "path to custom oed_schema"}, "oed_location_csv": {"type": "string", "description": "Source location CSV file path"}, "oed_accounts_csv": {"type": "string", "description": "Source accounts CSV file path"}, "oed_info_csv": {"type": "string", "description": "Reinsurance info. CSV file path"}, "oed_scope_csv": {"type": "string", "description": "Reinsurance scope CSV file path"}, "location": {"type": "string", "description": "A set of locations to include in the files"}, "portfolio": {"type": "string", "description": "A set of portfolios to include in the files"}, "account": {"type": "string", "description": "A set of locations to include in the files"}, "pre_loss_class_name": {"type": "string", "description": "Name of the class to use for the pre loss calculation"}, "pre_loss_setting_json": {"type": "string", "description": "pre loss calculation config JSON file path"}, "keys_data_csv": {"type": "string", "description": "Pre-generated keys CSV file path"}, "keys_errors_csv": {"type": "string", "description": "Pre-generated keys errors CSV file path"}, "profile_loc_json": {"type": "string", "description": "Source (OED) exposure profile JSON path"}, "profile_acc_json": {"type": "string", "description": "Source (OED) accounts profile JSON path"}, "profile_fm_agg_json": {"type": "string", "description": "FM (OED) aggregation profile path"}, "currency_conversion_json": {"type": "string", "description": "settings to perform currency conversion of oed files"}, "reporting_currency": {"type": "string", "description": "currency to use in the results reported"}, "disable_summarise_exposure": {"type": "boolean", "description": "Disables creation of an exposure summary report"}, "damage_group_id_cols": {"type": "array", "description": "Columns from loc file to set group_id"}, "hazard_group_id_cols": {"type": "array", "description": "Columns from loc file to set hazard_group_id"}, "lookup_multiprocessing": {"type": "boolean", "description": "Flag to enable/disable lookup multiprocessing"}, "do_disaggregation": {"type": "boolean", "description": "if True run the oasis disaggregation."}, "lookup_config": {"type": "string"}, "lookup_complex_config": {"type": "string"}, "write_ri_tree": {"type": "boolean"}, "write_chunksize": {"type": "number"}, "oasis_files_prefixes": {"type": "object"}, "profile_loc": {"type": "object"}, "profile_acc": {"type": "object"}, "profile_fm_agg": {"type": "object"}, "keys_format": {"type": "string", "description": "Keys files output format", "enum": ["oasis", "json"]}, "lookup_config_json": {"type": "string", "description": "Lookup config JSON file path"}, "lookup_data_dir": {"type": "string", "description": "Model lookup/keys data directory path"}, "lookup_module_path": {"type": "string", "description": "Model lookup module path"}, "lookup_complex_config_json": {"type": "string", "description": "Complex lookup config JSON file path"}, "lookup_num_processes": {"type": "number", "description": "Number of workers in multiprocess pools"}, "lookup_num_chunks": {"type": "number", "description": "Number of chunks to split the location file into for multiprocessing"}, "model_version_csv": {"type": "string", "description": "Model version CSV file path"}, "disable_oed_version_update": {"type": "boolean", "description": "Flag to enable/disable conversion to latest compatible OED version. Must be present in model settings."}, "exposure_pre_analysis_class_name": {"type": "string", "description": "Name of the class to use for the exposure_pre_analysis"}, "exposure_pre_analysis_setting_json": {"type": "string", "description": "Exposure Pre-Analysis config JSON file path"}, "post_analysis_class_name": {"type": "string", "description": "Name of the class to use for the post_analysis"}}}